<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scientific Expression Compiler - Interactive Dashboard</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- MathJax for mathematical rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>

    <!-- D3.js for AST visualization -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <!-- Chart.js for function plotting -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Highlight.js for assembly syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/x86asm.min.js"></script>

    <!-- Mermaid.js for compiler flow diagrams -->
    <script type="module">
      import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
      mermaid.initialize({ startOnLoad: true, theme: "dark" });
      window.mermaid = mermaid;
    </script>

    <style>
      :root {
        --bg-primary: #0a0e27;
        --bg-secondary: #141b2d;
        --bg-card: #1a2035;
        --text-primary: #e0e6ed;
        --text-secondary: #9ca3af;
        --accent: #3b82f6;
        --accent-hover: #2563eb;
        --border: #2d3748;
      }

      .light-mode {
        --bg-primary: #f5f7fa;
        --bg-secondary: #ffffff;
        --bg-card: #ffffff;
        --text-primary: #1a202c;
        --text-secondary: #4a5568;
        --accent: #3b82f6;
        --accent-hover: #2563eb;
        --border: #e2e8f0;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: var(--bg-primary);
        min-height: 100vh;
        color: var(--text-primary);
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        transition: background 0.3s ease, color 0.3s ease;
      }

      .glass-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }

      .glass-card:hover {
        box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
      }

      .token-badge {
        display: inline-block;
        padding: 6px 14px;
        margin: 4px;
        border-radius: 6px;
        font-family: 'JetBrains Mono', 'Courier New', monospace;
        font-size: 13px;
        font-weight: 500;
        background: var(--bg-secondary);
        border: 1px solid var(--border);
        color: var(--text-primary);
        animation: fadeIn 0.3s ease-in;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .result-box {
        background: var(--accent);
        color: white;
        padding: 32px;
        border-radius: 8px;
        font-size: 36px;
        font-weight: 600;
        text-align: center;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .code-block {
        background: var(--bg-secondary);
        color: var(--text-primary);
        padding: 16px;
        border-radius: 8px;
        font-family: 'JetBrains Mono', 'Courier New', monospace;
        font-size: 13px;
        overflow-x: auto;
        border-left: 3px solid var(--accent);
        line-height: 1.6;
      }

      #astCanvas {
        width: 100%;
        min-height: 500px;
        max-height: 1200px;
        background: var(--bg-secondary);
        border-radius: 8px;
        border: 1px solid var(--border);
        overflow: auto;
      }

      .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: var(--bg-card);
        border: 1px solid var(--border);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        transition: all 0.3s ease;
        z-index: 1000;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .theme-toggle:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      }

      input {
        background: var(--bg-secondary) !important;
        color: var(--text-primary) !important;
        border: 1px solid var(--border) !important;
      }

      input::placeholder {
        color: var(--text-secondary) !important;
      }

      button {
        transition: all 0.2s ease;
      }

      button:hover {
        transform: translateY(-2px);
      }
    </style>
  </head>
  <body class="p-8">
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" onclick="toggleTheme()" id="themeToggle">
      üåô
    </button>

    <div class="max-w-7xl mx-auto">
      <!-- Header -->
      <div class="text-center mb-12">
        <h1 class="text-4xl font-bold mb-2" style="color: var(--text-primary);">
          Scientific Expression Compiler
        </h1>
        <p class="text-sm" style="color: var(--text-secondary);">
          Interactive Compiler Pipeline with Numerical Calculus & Visualization
        </p>
      </div>

      <!-- Input Section -->
      <div class="glass-card p-6 mb-6">
        <div class="flex gap-3 mb-4">
          <input
            type="text"
            id="expressionInput"
            placeholder="Enter expression (e.g., diff(x^2, x, 3))"
            class="flex-1 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            onkeypress="if(event.key === 'Enter') compileExpression()"
          />
          <button
            onclick="compileExpression()"
            class="px-6 py-3 rounded-lg font-medium"
            style="background: var(--accent); color: white;"
          >
            Compile
          </button>
        </div>

        <!-- Example buttons -->
        <div class="flex flex-wrap gap-2">
          <button onclick="setExample('sin(pi/2)')" class="token-badge text-xs">sin(œÄ/2)</button>
          <button onclick="setExample('2^10')" class="token-badge text-xs">2^10</button>
          <button onclick="setExample('5!')" class="token-badge text-xs">5!</button>
          <button onclick="setExample('nCr(10,3)')" class="token-badge text-xs">nCr(10,3)</button>
          <button onclick="setExample('nPr(10,3)')" class="token-badge text-xs">nPr(10,3)</button>
          <button onclick="setExample('nCr(5,2)/nCr(10,2)')" class="token-badge text-xs">nCr(5,2)/nCr(10,2)</button>
          <button onclick="setExample('diff(x^2, x, 3)')" class="token-badge text-xs">diff(x^2, x, 3)</button>
          <button onclick="setExample('integrate(x^2, x, 0, 3)')" class="token-badge text-xs">integrate(x^2, x, 0, 3)</button>
        </div>
      </div>

      <!-- Result Section -->
      <div id="resultSection" class="hidden mb-6">
        <div class="glass-card p-6">
          <h3 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">Result</h3>
          <div class="result-box">
            <div id="resultValue"></div>
          </div>
        </div>
      </div>
        </div>
      </div>

      <!-- Tokens Section -->
      <div id="tokensSection" class="hidden mb-6">
        <div class="glass-card p-6">
          <h2 class="text-2xl font-bold text-white mb-4">
            Lexical Analysis - Token Stream
          </h2>
          <div id="tokensDisplay" class="flex flex-wrap"></div>
        </div>
      </div>

      <!-- Postfix Section -->
      <div id="postfixSection" class="hidden mb-6">
        <div class="glass-card p-6">
          <h2 class="text-2xl font-bold text-white mb-4">
            Syntax Analysis - Postfix (RPN)
          </h2>
          <p class="text-white text-sm mb-3 opacity-80">
            Shunting Yard Algorithm Output
          </p>
          <d3 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">Result</h3>
          <div class="result-box
      </div>

      <!-- AST Section -->
      <div id="astSection" class="hidden mb-6">
        <div class="glass-card p-6">
          <Tokens Section -->
      <div id="tokensSection" class="hidden mb-6">
        <div class="glass-card p-6">
          <h3 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">Tokens</h3>
          <div id="tokensDisplay" class="flex flex-wrap"></div>
        </div>
      </div>

      <!-- Postfix Section -->
      <div id="postfixSection" class="hidden mb-6">
        <div class="glass-card p-6">
          <h3 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">Postfix Notation</h3>
          <div id="postfixDisplay" class="flex flex-wrap"></div>
        </div>
      </div>

      <!-- AST Section -->
      <div id="astSection" class="hidden mb-6">
        <div class="glass-card p-6">
          <h3 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">Abstract Syntax Tree</h3>
          <div id="astCanvas"></div>
        </div>
      </div>

      <!-- Intermediate Code Section -->
      <div id="intermediateSection" class="hidden mb-6">
        <div class="glass-card p-6">
          <h3 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">Intermediate Code</h3>
          <div id="intermediateCode" class="code-block"></div>
        </div>
      </div>

      <!-- Expression Optimization Analysis Section -->
      <div id="expressionOptSection" class="hidden mb-6">
        <div class="glass-card p-6">
          <h3 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">
            Expression Optimization Analysis
          </h3>
          
          <button
            onclick="analyzeExpressionOptimization()"
            class="px-5 py-2.5 rounded-md text-sm font-medium mb-4 transition-all hover:opacity-90"
            style="background: linear-gradient(135deg, var(--accent) 0%, #7c3aed 100%); color: white; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);"
          >
            Analyze Optimization
          </button>

          <!-- Loading State -->
          <div id="exprOptLoading" class="hidden text-center py-8">
            <div class="inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"></div>
            <p class="mt-3" style="color: var(--text-secondary);">Compiling and analyzing...</p>
          </div>

          <!-- Results -->
          <div id="exprOptResults" class="hidden">
            <!-- Comparison Summary -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div class="glass-card p-5" style="background: rgba(59, 130, 246, 0.08); border-color: rgba(59, 130, 246, 0.3);">
                <div class="flex items-center justify-between mb-3">
                  <h4 class="text-base font-semibold" style="color: #93c5fd;">-O0</h4>
                  <span class="text-xs px-2 py-1 rounded" style="background: rgba(59, 130, 246, 0.2); color: #93c5fd;">No Optimization</span>
                </div>
                <div class="space-y-3">
                  <div class="flex items-center justify-between">
                    <span class="text-sm" style="color: var(--text-secondary);">Binary Size</span>
                    <span id="o0Size" class="text-lg font-bold" style="color: var(--text-primary);"></span>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-sm" style="color: var(--text-secondary);">Instructions</span>
                    <span id="o0Instructions" class="text-lg font-bold" style="color: var(--text-primary);"></span>
                  </div>
                </div>
              </div>

              <div class="glass-card p-5" style="background: rgba(34, 197, 94, 0.08); border-color: rgba(34, 197, 94, 0.3);">
                <div class="flex items-center justify-between mb-3">
                  <h4 class="text-base font-semibold" style="color: #86efac;">-O2</h4>
                  <span class="text-xs px-2 py-1 rounded" style="background: rgba(34, 197, 94, 0.2); color: #86efac;">Optimized</span>
                </div>
                <div class="space-y-3">
                  <div class="flex items-center justify-between">
                    <span class="text-sm" style="color: var(--text-secondary);">Binary Size</span>
                    <span id="o2Size" class="text-lg font-bold" style="color: var(--text-primary);"></span>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-sm" style="color: var(--text-secondary);">Instructions</span>
                    <span id="o2Instructions" class="text-lg font-bold" style="color: var(--text-primary);"></span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Improvement Stats -->
            <div class="glass-card p-5" style="background: rgba(168, 85, 247, 0.08); border-color: rgba(168, 85, 247, 0.3);">
              <h4 class="text-sm font-semibold mb-4" style="color: #e9d5ff;">Optimization Impact</h4>
              <div class="grid grid-cols-2 gap-6">
                <div class="text-center">
                  <p class="text-xs uppercase tracking-wide mb-2" style="color: var(--text-secondary);">Size Reduction</p>
                  <p id="sizeReduction" class="text-3xl font-bold" style="color: #c084fc;"></p>
                </div>
                <div class="text-center">
                  <p class="text-xs uppercase tracking-wide mb-2" style="color: var(--text-secondary);">Instruction Reduction</p>
                  <p id="instrReduction" class="text-3xl font-bold" style="color: #c084fc;"></p>
                </div>
              </div>
            </div>
          </div>

          <!-- Error Display -->
          <div id="exprOptError" class="hidden p-4 rounded-lg" style="background: rgba(239, 68, 68, 0.1); border: 1px solid #ef4444;">
            <p class="text-sm" style="color: #fca5a5;"></p>
          </div>
        </div>
      </div>

      <!-- Calculus Visualization -->
      <div id="calculusSection" class="hidden mb-6">
        <div class="glass-card p-6">
          <h3 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">Numerical Calculus</h3>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div>
              <h4 class="text-sm font-medium mb-3" style="color: var(--text-secondary);">Steps</h4>
              <div id="calculusSteps" class="code-block"></div>
            </div>
            <div>
              <h4 class="text-sm font-medium mb-3" style="color: var(--text-secondary);">Function Plot</h4>
              <canvas id="calculusChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Object File Analysis Section -->
      <div id="objectAnalysisSection" class="mb-6">
        <div class="glass-card p-8">
          <div class="mb-6">
            <h3 class="text-3xl font-bold mb-3" style="color: var(--text-primary);">
              Machine-Level Object File Analysis
            </h3>
            <p class="text-base" style="color: var(--text-secondary);">
              Analyze compiled object files to understand low-level machine representation
            </p>
          </div>
          
          <!-- Control Panel -->
          <div class="flex flex-wrap gap-3 mb-6">
            <button
              onclick="buildObjectFiles()"
              class="px-5 py-2.5 rounded-md text-sm font-medium transition-all hover:opacity-90"
              style="background: linear-gradient(135deg, var(--accent) 0%, #7c3aed 100%); color: white; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);"
              id="buildBtn"
            >
              Build Object Files
            </button>
            <button
              onclick="analyzeObject('O0')"
              class="px-5 py-2.5 rounded-md text-sm font-medium transition-all hover:opacity-90"
              style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);"
              id="analyzeO0Btn"
            >
              Analyze -O0
            </button>
            <button
              onclick="analyzeObject('O2')"
              class="px-5 py-2.5 rounded-md text-sm font-medium transition-all hover:opacity-90"
              style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);"
              id="analyzeO2Btn"
            >
              Analyze -O2
            </button>
            <button
              onclick="compareOptimizations()"
              class="px-5 py-2.5 rounded-md text-sm font-medium transition-all hover:opacity-90"
              style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);"
              id="compareBtn"
            >
              Compare Optimizations
            </button>
          </div>

          <!-- Status Display -->
          <div id="analysisStatus" class="hidden mb-6 p-3 rounded-lg" style="background: var(--bg-secondary); border-left: 3px solid var(--accent);">
            <p id="statusMessage" class="text-sm font-normal" style="color: var(--text-secondary);"></p>
          </div>

          <!-- Tabs for different views -->
          <div class="flex gap-1 mb-6 border-b-2 pb-0" style="border-color: var(--border);">
            <button
              onclick="switchAnalysisTab('disassembly')"
              class="px-4 py-2 text-sm font-medium transition-all rounded-t-lg"
              id="tab-disassembly"
              style="color: var(--text-secondary); background: transparent;"
            >
              Disassembly
            </button>
            <button
              onclick="switchAnalysisTab('symbols')"
              class="px-4 py-2 text-sm font-medium transition-all rounded-t-lg"
              id="tab-symbols"
              style="color: var(--text-secondary); background: transparent;"
            >
              Symbol Table
            </button>
            <button
              onclick="switchAnalysisTab('sections')"
              class="px-4 py-2 text-sm font-medium transition-all rounded-t-lg"
              id="tab-sections"
              style="color: var(--text-secondary); background: transparent;"
            >
              ELF Sections
            </button>
            <button
              onclick="switchAnalysisTab('metrics')"
              class="px-4 py-2 text-sm font-medium transition-all rounded-t-lg"
              id="tab-metrics"
              style="color: var(--text-secondary); background: transparent;"
            >
              Size Metrics
            </button>
            <button
              onclick="switchAnalysisTab('comparison')"
              class="px-4 py-2 text-sm font-medium transition-all rounded-t-lg"
              id="tab-comparison"
              style="color: var(--text-secondary); background: transparent;"
            >
              Comparison
            </button>
          </div>

          <!-- Tab Content -->
          <div id="analysisContent" class="min-h-96">
            <!-- Disassembly View -->
            <div id="view-disassembly" class="analysis-view hidden">
              <div class="mb-6 p-4 rounded-lg" style="background: var(--bg-secondary);">
                <h4 class="text-lg font-semibold mb-3" style="color: var(--text-primary);">
                  Assembly Instructions
                </h4>
                <div id="disassemblyStats" class="flex gap-6 text-base">
                  <span style="color: var(--text-primary);">
                    Functions: <strong class="text-xl" style="color: var(--accent);" id="funcCount">0</strong>
                  </span>
                  <span style="color: var(--text-primary);">
                    Instructions: <strong class="text-xl" style="color: #10b981;" id="instCount">0</strong>
                  </span>
                </div>
              </div>
              <div id="disassemblyCode" class="code-block mb-6" style="max-height: 500px; overflow-y: auto;">
                <p style="color: var(--text-secondary);">No disassembly data. Build and analyze an object file first.</p>
              </div>
              <div class="mt-6 p-4 rounded-lg" style="background: var(--bg-secondary);">
                <h4 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">
                  Instruction Frequency (Top 15)
                </h4>
                <canvas id="instructionChart" style="max-height: 350px;"></canvas>
              </div>
            </div>

            <!-- Symbol Table View -->
            <div id="view-symbols" class="analysis-view hidden">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="p-4 rounded-lg" style="background: var(--bg-secondary);">
                  <h4 class="text-lg font-semibold mb-3" style="color: var(--text-primary);">
                    Global Symbols (<span style="color: var(--accent);" id="globalCount">0</span>)
                  </h4>
                  <div id="globalSymbols" class="code-block" style="max-height: 400px; overflow-y: auto;">
                    <p style="color: var(--text-secondary);">No symbols</p>
                  </div>
                </div>
                <div class="p-4 rounded-lg" style="background: var(--bg-secondary);">
                  <h4 class="text-lg font-semibold mb-3" style="color: var(--text-primary);">
                    Local Symbols (<span style="color: #10b981;" id="localCount">0</span>)
                  </h4>
                  <div id="localSymbols" class="code-block" style="max-height: 400px; overflow-y: auto;">
                    <p style="color: var(--text-secondary);">No symbols</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- ELF Sections View -->
            <div id="view-sections" class="analysis-view hidden">
              <div class="p-4 rounded-lg" style="background: var(--bg-secondary);">
                <div id="sectionsTable" class="overflow-x-auto">
                  <table class="w-full text-base">
                    <thead>
                      <tr style="border-bottom: 2px solid var(--border);">
                        <th class="text-left p-3 font-semibold" style="color: var(--text-primary);">Name</th>
                        <th class="text-left p-3 font-semibold" style="color: var(--text-primary);">Type</th>
                        <th class="text-left p-3 font-semibold" style="color: var(--text-primary);">Address</th>
                        <th class="text-left p-3 font-semibold" style="color: var(--text-primary);">Size</th>
                      </tr>
                    </thead>
                    <tbody id="sectionsBody" style="color: var(--text-primary);">
                      <tr><td colspan="4" class="p-3" style="color: var(--text-secondary);">No sections data</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <!-- Size Metrics View -->
            <div id="view-metrics" class="analysis-view hidden">
              <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="p-6 rounded-lg text-center transition-all hover:scale-105" style="background: var(--bg-secondary); border-top: 4px solid var(--accent);">
                  <p class="text-sm mb-2 font-medium" style="color: var(--text-secondary);">.text (Code)</p>
                  <p class="text-3xl font-bold mb-1" style="color: var(--accent);" id="textSize">0</p>
                  <p class="text-sm" style="color: var(--text-secondary);">bytes</p>
                </div>
                <div class="p-6 rounded-lg text-center transition-all hover:scale-105" style="background: var(--bg-secondary); border-top: 4px solid #10b981;">
                  <p class="text-sm mb-2 font-medium" style="color: var(--text-secondary);">.data</p>
                  <p class="text-3xl font-bold mb-1" style="color: #10b981;" id="dataSize">0</p>
                  <p class="text-sm" style="color: var(--text-secondary);">bytes</p>
                </div>
                <div class="p-6 rounded-lg text-center transition-all hover:scale-105" style="background: var(--bg-secondary); border-top: 4px solid #f59e0b;">
                  <p class="text-sm mb-2 font-medium" style="color: var(--text-secondary);">.bss</p>
                  <p class="text-3xl font-bold mb-1" style="color: #f59e0b;" id="bssSize">0</p>
                  <p class="text-sm" style="color: var(--text-secondary);">bytes</p>
                </div>
                <div class="p-6 rounded-lg text-center transition-all hover:scale-105" style="background: var(--bg-secondary); border-top: 4px solid #8b5cf6;">
                  <p class="text-sm mb-2 font-medium" style="color: var(--text-secondary);">Total</p>
                  <p class="text-3xl font-bold mb-1" style="color: #8b5cf6;" id="totalSize">0</p>
                  <p class="text-sm" style="color: var(--text-secondary);">bytes</p>
                </div>
              </div>
              <div class="p-6 rounded-lg" style="background: var(--bg-secondary);">
                <h4 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">Memory Breakdown</h4>
                <canvas id="sizeChart" style="max-height: 350px;"></canvas>
              </div>
            </div>

            <!-- Comparison View -->
            <div id="view-comparison" class="analysis-view hidden">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div class="p-6 rounded-lg" style="background: var(--bg-secondary);">
                  <h4 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">
                    Instruction Count Comparison
                  </h4>
                  <canvas id="comparisonInstChart"></canvas>
                </div>
                <div class="p-6 rounded-lg" style="background: var(--bg-secondary);">
                  <h4 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">
                    Binary Size Comparison
                  </h4>
                  <canvas id="comparisonSizeChart"></canvas>
                </div>
              </div>
              <div class="p-6 rounded-lg" style="background: var(--bg-secondary);">
                <h4 class="text-lg font-semibold mb-4" style="color: var(--text-primary);">
                  Optimization Impact
                </h4>
                <div id="optimizationStats" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                  <div class="text-center p-4 rounded-lg" style="background: var(--bg-primary);">
                    <p class="text-sm mb-2" style="color: var(--text-secondary);">Instruction Reduction</p>
                    <p class="text-3xl font-bold mt-2" style="color: var(--accent);" id="instReduction">-</p>
                  </div>
                  <div class="text-center p-4 rounded-lg" style="background: var(--bg-primary);">
                    <p class="text-sm mb-2" style="color: var(--text-secondary);">Size Reduction</p>
                    <p class="text-3xl font-bold mt-2" style="color: #10b981;" id="sizeReduction">-</p>
                  </div>
                  <div class="text-center p-4 rounded-lg" style="background: var(--bg-primary);">
                    <p class="text-sm mb-2" style="color: var(--text-secondary);">Reduction Percentage</p>
                    <p class="text-3xl font-bold mt-2" style="color: #f59e0b;" id="reductionPercent">-</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Error Section -->
      <div id="errorSection" class="hidden mb-6">
        <div class="glass-card p-6" style="border: 2px solid #ef4444;">
          <h3 class="text-lg font-semibold mb-4" style="color: #ef4444;">Error</h3>
          <div id="errorMessage" style="color: var(--text-primary);"></div>
        </div>
      </div>

      <!-- Footer -->
      <div class="text-center mt-12" style="color: var(--text-secondary); font-size: 12px;">
        <p>Built with C++, Python Flask, and JavaScript</p>
      </div>
    </div>

    <!-- JavaScript -->
    <script>
      // Theme toggle functionality
      function toggleTheme() {
        const body = document.body;
        const themeToggle = document.getElementById('themeToggle');
        
        if (body.classList.contains('light-mode')) {
          body.classList.remove('light-mode');
          themeToggle.textContent = 'üåô';
          localStorage.setItem('theme', 'dark');
        } else {
          body.classList.add('light-mode');
          themeToggle.textContent = '‚òÄÔ∏è';
          localStorage.setItem('theme', 'light');
        }
      }
      
      // Load saved theme
      window.addEventListener('DOMContentLoaded', () => {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
          document.body.classList.add('light-mode');
          document.getElementById('themeToggle').textContent = '‚òÄÔ∏è';
        }
      });
    </script>
    <script src="/js/app.js"></script>
    <script src="/js/visualizer.js"></script>
    <script src="/js/object-analysis.js"></script>
  </body>
</html>